{"version":3,"file":"core.cjs.js","mappings":"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","sources":["webpack://@web3auth/core/webpack/bootstrap","webpack://@web3auth/core/webpack/runtime/compat get default export","webpack://@web3auth/core/webpack/runtime/define property getters","webpack://@web3auth/core/webpack/runtime/hasOwnProperty shorthand","webpack://@web3auth/core/webpack/runtime/make namespace object","webpack://@web3auth/core/external commonjs2 \"@babel/runtime/helpers/defineProperty\"","webpack://@web3auth/core/external commonjs2 \"@toruslabs/openlogin-jrpc\"","webpack://@web3auth/core/external commonjs2 \"@web3auth/base\"","webpack://@web3auth/core/external commonjs2 \"@web3auth/base-plugin\"","webpack://@web3auth/core/./src/core.ts","webpack://@web3auth/core/./src/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/defineProperty\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@toruslabs/openlogin-jrpc\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@web3auth/base\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@web3auth/base-plugin\");","import { SafeEventEmitter } from \"@toruslabs/openlogin-jrpc\";\nimport {\n  ADAPTER_EVENTS,\n  ADAPTER_NAMESPACES,\n  ADAPTER_STATUS,\n  ADAPTER_STATUS_TYPE,\n  CHAIN_NAMESPACES,\n  CONNECTED_EVENT_DATA,\n  CustomChainConfig,\n  getChainConfig,\n  IAdapter,\n  IWeb3Auth,\n  log,\n  SafeEventEmitterProvider,\n  storageAvailable,\n  UserAuthInfo,\n  UserInfo,\n  WALLET_ADAPTER_TYPE,\n  WalletInitializationError,\n  WalletLoginError,\n  Web3AuthError,\n} from \"@web3auth/base\";\nimport { IPlugin, PLUGIN_NAMESPACES } from \"@web3auth/base-plugin\";\n\nexport interface Web3AuthCoreOptions {\n  /**\n   * custom chain configuration for chainNamespace\n   *\n   * @defaultValue mainnet config of provided chainNamespace\n   */\n  chainConfig: Partial<CustomChainConfig> & Pick<CustomChainConfig, \"chainNamespace\">;\n\n  /**\n   * setting to true will enable logs\n   *\n   * @defaultValue false\n   */\n  enableLogging?: boolean;\n  /**\n   * setting to \"local\" will persist social login session accross browser tabs.\n   *\n   * @defaultValue \"local\"\n   */\n  storageKey?: \"session\" | \"local\";\n\n  /**\n   * sessionTime (in seconds) for idToken issued by Web3Auth for server side verification.\n   * @defaultValue 86400\n   *\n   * Note: max value can be 7 days (86400 * 7) and min can be  1 day (86400)\n   */\n  sessionTime?: number;\n}\n\nconst ADAPTER_CACHE_KEY = \"Web3Auth-cachedAdapter\";\nexport class Web3AuthCore extends SafeEventEmitter implements IWeb3Auth {\n  readonly coreOptions: Web3AuthCoreOptions;\n\n  public connectedAdapterName: string | null = null;\n\n  public status: ADAPTER_STATUS_TYPE = ADAPTER_STATUS.NOT_READY;\n\n  public cachedAdapter: string | null = null;\n\n  protected walletAdapters: Record<string, IAdapter<unknown>> = {};\n\n  private plugins: Record<string, IPlugin> = {};\n\n  private storage: \"sessionStorage\" | \"localStorage\" = \"localStorage\";\n\n  constructor(options: Web3AuthCoreOptions) {\n    super();\n    if (options.enableLogging) log.enableAll();\n    else log.disableAll();\n    if (!options.chainConfig?.chainNamespace || !Object.values(CHAIN_NAMESPACES).includes(options.chainConfig?.chainNamespace))\n      throw WalletInitializationError.invalidParams(\"Please provide a valid chainNamespace in chainConfig\");\n    if (options.storageKey === \"session\") this.storage = \"sessionStorage\";\n    this.cachedAdapter = storageAvailable(this.storage) ? window[this.storage].getItem(ADAPTER_CACHE_KEY) : null;\n\n    this.coreOptions = {\n      ...options,\n      chainConfig: {\n        ...(getChainConfig(options.chainConfig?.chainNamespace, options.chainConfig?.chainId) || {}),\n        ...options.chainConfig,\n      },\n    };\n    this.subscribeToAdapterEvents = this.subscribeToAdapterEvents.bind(this);\n  }\n\n  get provider(): SafeEventEmitterProvider | null {\n    if (this.status === ADAPTER_STATUS.CONNECTED && this.connectedAdapterName) {\n      const adapter = this.walletAdapters[this.connectedAdapterName];\n      return adapter.provider;\n    }\n    return null;\n  }\n\n  set provider(_: SafeEventEmitterProvider | null) {\n    throw new Error(\"Not implemented\");\n  }\n\n  public async init(): Promise<void> {\n    const initPromises = Object.keys(this.walletAdapters).map((adapterName) => {\n      this.subscribeToAdapterEvents(this.walletAdapters[adapterName]);\n      // if adapter doesn't have any chain config yet thn set it based on provided namespace and chainId.\n      // if no chainNamespace or chainId is being provided, it will connect with mainnet.\n      if (!this.walletAdapters[adapterName].chainConfigProxy) {\n        const providedChainConfig = this.coreOptions.chainConfig;\n        if (!providedChainConfig.chainNamespace) throw WalletInitializationError.invalidParams(\"Please provide chainNamespace in chainConfig\");\n        const chainConfig = {\n          ...getChainConfig(providedChainConfig.chainNamespace, providedChainConfig.chainId),\n          ...providedChainConfig,\n        } as CustomChainConfig;\n        this.walletAdapters[adapterName].setChainConfig(chainConfig);\n      }\n      return this.walletAdapters[adapterName].init({ autoConnect: this.cachedAdapter === adapterName }).catch((e) => log.error(e));\n    });\n    this.status = ADAPTER_STATUS.READY;\n    await Promise.all(initPromises);\n  }\n\n  public configureAdapter(adapter: IAdapter<unknown>): Web3AuthCore {\n    this.checkInitRequirements();\n    const providedChainConfig = this.coreOptions.chainConfig;\n\n    if (!providedChainConfig.chainNamespace) throw WalletInitializationError.invalidParams(\"Please provide chainNamespace in chainConfig\");\n\n    const adapterAlreadyExists = this.walletAdapters[adapter.name];\n    if (adapterAlreadyExists) throw WalletInitializationError.duplicateAdapterError(`Wallet adapter for ${adapter.name} already exists`);\n    if (adapter.adapterNamespace !== ADAPTER_NAMESPACES.MULTICHAIN && adapter.adapterNamespace !== providedChainConfig.chainNamespace)\n      throw WalletInitializationError.incompatibleChainNameSpace(\n        `This wallet adapter belongs to ${adapter.adapterNamespace} which is incompatible with currently used namespace: ${providedChainConfig.chainNamespace}`\n      );\n\n    if (\n      adapter.adapterNamespace === ADAPTER_NAMESPACES.MULTICHAIN &&\n      adapter.currentChainNamespace &&\n      providedChainConfig.chainNamespace !== adapter.currentChainNamespace\n    ) {\n      // chainConfig checks are already validated in constructor so using typecast is safe here.\n      adapter.setChainConfig(providedChainConfig as CustomChainConfig);\n    }\n\n    this.walletAdapters[adapter.name] = adapter;\n    return this;\n  }\n\n  public clearCache() {\n    if (!storageAvailable(this.storage)) return;\n    window[this.storage].removeItem(ADAPTER_CACHE_KEY);\n    this.cachedAdapter = null;\n  }\n\n  /**\n   * Connect to a specific wallet adapter\n   * @param walletName - Key of the walletAdapter to use.\n   */\n  async connectTo<T>(walletName: WALLET_ADAPTER_TYPE, loginParams?: T): Promise<SafeEventEmitterProvider | null> {\n    if (!this.walletAdapters[walletName])\n      throw WalletInitializationError.notFound(`Please add wallet adapter for ${walletName} wallet, before connecting`);\n    const provider = await this.walletAdapters[walletName].connect(loginParams);\n    return provider;\n  }\n\n  async logout(options: { cleanup: boolean } = { cleanup: false }): Promise<void> {\n    if (this.status !== ADAPTER_STATUS.CONNECTED || !this.connectedAdapterName) throw WalletLoginError.notConnectedError(`No wallet is connected`);\n    await this.walletAdapters[this.connectedAdapterName].disconnect(options);\n  }\n\n  async getUserInfo(): Promise<Partial<UserInfo>> {\n    log.debug(\"Getting user info\", this.status, this.connectedAdapterName);\n    if (this.status !== ADAPTER_STATUS.CONNECTED || !this.connectedAdapterName) throw WalletLoginError.notConnectedError(`No wallet is connected`);\n    return this.walletAdapters[this.connectedAdapterName].getUserInfo();\n  }\n\n  async authenticateUser(): Promise<UserAuthInfo> {\n    if (this.status !== ADAPTER_STATUS.CONNECTED || !this.connectedAdapterName) throw WalletLoginError.notConnectedError(`No wallet is connected`);\n    return this.walletAdapters[this.connectedAdapterName].authenticateUser();\n  }\n\n  public async addPlugin(plugin: IPlugin): Promise<IWeb3Auth> {\n    if (this.plugins[plugin.name]) throw new Error(`Plugin ${plugin.name} already exist`);\n    if (plugin.pluginNamespace !== PLUGIN_NAMESPACES.MULTICHAIN && plugin.pluginNamespace !== this.coreOptions.chainConfig.chainNamespace)\n      throw new Error(\n        `This plugin belongs to ${plugin.pluginNamespace} namespace which is incompatible with currently used namespace: ${this.coreOptions.chainConfig.chainNamespace}`\n      );\n\n    this.plugins[plugin.name] = plugin;\n    await plugin.initWithWeb3Auth(this);\n    return this;\n  }\n\n  protected subscribeToAdapterEvents(walletAdapter: IAdapter<unknown>): void {\n    walletAdapter.on(ADAPTER_EVENTS.CONNECTED, async (data: CONNECTED_EVENT_DATA) => {\n      this.status = ADAPTER_STATUS.CONNECTED;\n      this.connectedAdapterName = data.adapter;\n      this.cacheWallet(data.adapter);\n      log.debug(\"connected\", this.status, this.connectedAdapterName);\n      await Promise.all(\n        Object.values(this.plugins).map((plugin) => {\n          return plugin.connect().catch((error: Web3AuthError) => {\n            // swallow error if connector adapter doesn't supports this plugin.\n            if (error.code === 5211) {\n              return;\n            }\n            // throw error;\n            log.error(error);\n          });\n        })\n      );\n      this.emit(ADAPTER_EVENTS.CONNECTED, { ...data } as CONNECTED_EVENT_DATA);\n    });\n\n    walletAdapter.on(ADAPTER_EVENTS.DISCONNECTED, async (data) => {\n      // get back to ready state for rehydrating.\n      this.status = ADAPTER_STATUS.READY;\n      if (storageAvailable(this.storage)) {\n        const cachedAdapter = window[this.storage].getItem(ADAPTER_CACHE_KEY);\n        if (this.connectedAdapterName === cachedAdapter) {\n          this.clearCache();\n        }\n      }\n\n      log.debug(\"disconnected\", this.status, this.connectedAdapterName);\n      await Promise.all(\n        Object.values(this.plugins).map((plugin) => {\n          return plugin.disconnect().catch((error: Web3AuthError) => {\n            // swallow error if adapter doesn't supports this plugin.\n            if (error.code === 5211) {\n              return;\n            }\n            // throw error;\n            log.error(error);\n          });\n        })\n      );\n      this.connectedAdapterName = null;\n      this.emit(ADAPTER_EVENTS.DISCONNECTED, data);\n    });\n    walletAdapter.on(ADAPTER_EVENTS.CONNECTING, (data) => {\n      this.status = ADAPTER_STATUS.CONNECTING;\n      this.emit(ADAPTER_EVENTS.CONNECTING, data);\n      log.debug(\"connecting\", this.status, this.connectedAdapterName);\n    });\n    walletAdapter.on(ADAPTER_EVENTS.ERRORED, (data) => {\n      this.status = ADAPTER_STATUS.ERRORED;\n      this.clearCache();\n      this.emit(ADAPTER_EVENTS.ERRORED, data);\n      log.debug(\"errored\", this.status, this.connectedAdapterName);\n    });\n\n    walletAdapter.on(ADAPTER_EVENTS.ADAPTER_DATA_UPDATED, (data) => {\n      log.debug(\"adapter data updated\", data);\n      this.emit(ADAPTER_EVENTS.ADAPTER_DATA_UPDATED, data);\n    });\n  }\n\n  protected checkInitRequirements(): void {\n    if (this.status === ADAPTER_STATUS.CONNECTING) throw WalletInitializationError.notReady(\"Already pending connection\");\n    if (this.status === ADAPTER_STATUS.CONNECTED) throw WalletInitializationError.notReady(\"Already connected\");\n    if (this.status === ADAPTER_STATUS.READY) throw WalletInitializationError.notReady(\"Adapter is already initialized\");\n  }\n\n  private cacheWallet(walletName: string) {\n    if (!storageAvailable(this.storage)) return;\n    window[this.storage].setItem(ADAPTER_CACHE_KEY, walletName);\n    this.cachedAdapter = walletName;\n  }\n}\n","export * from \"./core\";\n"],"names":["SafeEventEmitter","ADAPTER_EVENTS","ADAPTER_NAMESPACES","ADAPTER_STATUS","CHAIN_NAMESPACES","getChainConfig","log","storageAvailable","WalletInitializationError","WalletLoginError","PLUGIN_NAMESPACES","ADAPTER_CACHE_KEY","Web3AuthCore","constructor","options","NOT_READY","enableLogging","enableAll","disableAll","chainConfig","chainNamespace","Object","values","includes","invalidParams","storageKey","storage","cachedAdapter","window","getItem","coreOptions","chainId","subscribeToAdapterEvents","bind","provider","status","CONNECTED","connectedAdapterName","adapter","walletAdapters","_","Error","init","initPromises","keys","map","adapterName","chainConfigProxy","providedChainConfig","setChainConfig","autoConnect","catch","e","error","READY","Promise","all","configureAdapter","checkInitRequirements","adapterAlreadyExists","name","duplicateAdapterError","adapterNamespace","MULTICHAIN","incompatibleChainNameSpace","currentChainNamespace","clearCache","removeItem","connectTo","walletName","loginParams","notFound","connect","logout","cleanup","notConnectedError","disconnect","getUserInfo","debug","authenticateUser","addPlugin","plugin","plugins","pluginNamespace","initWithWeb3Auth","walletAdapter","on","data","cacheWallet","code","emit","DISCONNECTED","CONNECTING","ERRORED","ADAPTER_DATA_UPDATED","notReady","setItem"],"sourceRoot":""}